# Spring框架：



##### 说一下spring框架：

Spring框架是一个广泛用于构建企业级Java应用程序的开源框架。它提供了一系列的库和工具，用于解决各种应用程序开发方面的问题，包括依赖注入、面向切面编程、事务管理、数据访问、消息传递等。Spring的核心理念是轻量级、松散耦合和可扩展性，它使得开发者能够更加专注于业务逻辑而不是处理底层的技术细节。

以下是一些Spring框架的关键特点和组件：

1. **依赖注入（Dependency Injection）**：Spring通过依赖注入来管理组件之间的关系。这意味着对象不再需要自己创建它们的依赖关系，而是由Spring容器负责将依赖注入到对象中。这降低了组件之间的耦合性，提高了可维护性和可测试性。
2. **面向切面编程（AOP）**：Spring支持面向切面编程，允许开发者将横切关注点（如日志记录、事务管理）从应用程序的主要业务逻辑中分离出来。这可以通过使用切面和通知来实现，提高了代码的模块性和可维护性。
3. **事务管理**：Spring提供了强大的事务管理支持，允许开发者使用声明式事务管理或编程式事务管理来管理数据库事务。这对于确保数据一致性和可靠性非常重要。
4. **数据访问和集成**：Spring简化了数据访问层的开发，提供了模板类和ORM（对象关系映射）支持，使得与各种数据源（关系数据库、NoSQL数据库、消息队列等）集成变得容易。
5. **Spring MVC**：Spring框架提供了Spring MVC，用于构建Web应用程序。它是一个基于MVC（模型-视图-控制器）模式的Web框架，支持灵活的URL映射、视图解析、表单处理和拦截器等。
6. **Spring Boot**：Spring Boot是Spring的一个子项目，它简化了Spring应用程序的初始化和配置。它提供了自动配置、嵌入式Web服务器支持（如Tomcat、Jetty）、健康检查、外部化配置等功能，加速了Spring应用程序的开发和部署。
7. **Spring Cloud**：Spring Cloud是一套用于构建分布式系统的工具和框架，它基于Spring Boot，并提供了服务发现、负载均衡、断路器、配置管理等功能，用于构建微服务架构。

总之，Spring框架是一个强大且广泛使用的Java框架，它提供了丰富的功能和组件，可以用于开发各种规模的企业级应用程序，从传统的单体应用到现代的微服务架构。它的设计理念和模块化架构使得开发者能够选择并使用他们需要的部分，同时保持了高度的可扩展性和灵活性。

##### 举个例子，如果面试官问你：“你能解释一下Spring框架的依赖注入是什么吗？”你可以这样回答：

"当谈论Spring框架时，依赖注入是其中一个非常重要的概念。它是一种设计模式，允许我们将对象的依赖关系从代码中硬编码变为由Spring容器进行管理。这意味着，我们不再需要在代码中手动创建和管理对象之间的关系，而是由Spring容器负责注入依赖关系。这提高了代码的松散耦合性，使得应用程序更容易维护和扩展。例如，在Spring中，我们可以使用XML配置文件或注解来定义Bean，然后Spring容器会负责创建和注入这些Bean，使它们可用于应用程序的其他部分。这种方式使得我们可以更灵活地配置和管理组件之间的关系，同时也支持更好的单元测试。"

##### spring框架，如何启动的，启动类的注解是什么

Spring框架的启动通常涉及到配置和初始化Spring容器，以便应用程序能够使用Spring的依赖注入和其他特性。启动Spring框架的方式通常有多种，但一个常见的方式是使用Spring Boot框架，其中的启动类使用特定的注解来引导Spring应用程序。

以下是一般步骤以及Spring Boot启动类的常见注解：

1. **引入Spring Boot依赖**：首先，你需要在项目的构建工具（如Maven或Gradle）中引入Spring Boot相关的依赖，以便构建Spring Boot应用程序。

2. **创建Spring Boot启动类**：在项目中创建一个Java类，这个类将充当Spring Boot应用程序的启动类。通常，这个类包含一个`main`方法用于启动应用程序。你可以使用`@SpringBootApplication`注解来标记这个类，以指示它是Spring Boot应用程序的入口点。

   ```
   javaCopy code
   import org.springframework.boot.SpringApplication;
   import org.springframework.boot.autoconfigure.SpringBootApplication;
   
   @SpringBootApplication
   public class MyApplication {
   
       public static void main(String[] args) {
           SpringApplication.run(MyApplication.class, args);
       }
   }
   ```

   - `@SpringBootApplication`是一个组合注解，它包含了`@Configuration`、`@EnableAutoConfiguration`和`@ComponentScan`等注解，用于配置Spring Boot应用程序。这个注解告诉Spring Boot框架这是应用程序的主类，它会自动扫描并初始化配置、组件和服务。

3. **配置应用程序**：在启动类之外，你可以创建其他Java配置类来定义和配置Spring Bean、数据库连接、消息队列等，以及其他应用程序组件。这些配置类可以使用`@Configuration`注解进行标记。

4. **编写应用程序代码**：在Spring Boot应用程序中，你可以编写业务逻辑、控制器、服务等组件，并使用Spring的依赖注入来管理它们之间的依赖关系。

5. **运行应用程序**：你可以通过运行启动类中的`main`方法来启动Spring Boot应用程序。Spring Boot将自动初始化Spring容器，并根据配置启动嵌入式的Web服务器（如Tomcat或Jetty），使你的应用程序可以接受HTTP请求。

Spring Boot的自动配置和约定优于配置的原则使得启动Spring应用程序变得非常简单，无需复杂的XML配置文件。这使得开发者能够更专注于应用程序的逻辑而不是繁琐的配置。



##### spring框架中的单例bean是线程安全的吗？

不是线程安全的，spring框架中有一个@Scope注解，默认的值就是singleton，单例的。

因为一般在spring的bean的中都是注入无状态的对象，没有线程安全问题，如果在bean中定义了可修改的成员变量，是要考虑线程安全问题的，可以使用多例或者加锁来解决；

##### 什么是AOP，你们项目中有没有使用到AOP

AOP是指面向对象编程，用于将那些与业务无关，但却对多个对象产生影响的公共行为和逻辑，抽取公共模块复用，降低耦合；

项目中使用到AOP：

记录操作日志，缓存，spring实现的事务；

核心是使用AOP中的环绕通知和切点表达式，通过环绕通知的参数获取请求方法的参数，获取到这些参数后，保存到数据库中；

##### AOP你了解吗？

这个我可以说一些自己所了解的，aop是面向切面编程，它主要用于将一些与业务无关，但却对多个对象产生的影响的行为和逻辑，抽取公共模块进行复用，减低耦和，比如我们在开发一个项目时，小程序请求的借口每次都需要用到token令牌，但是在每个接口里都写这些代码过于冗余了，这时候我们就需要用到aop了，
首先 自定义一个注解token
第二是定义aop切面，在切面中，定义切点和通知，切点，也就是方法的拦截规则，我们可以按照注解来拦截，也就是某一个带有自定义注解的方法，将被我拦截下来。
第三就是拦截下来后还需要写一个通知，比如环绕通知、前置通知等
aop还可以用于数据库日志记录、spring实现事务等场景.
对mvc有所了解吗
嗯嗯 mvc通俗点来讲它就像个框架，是我们平常开发中都会用到的，比如说编写代码时的controller层，server层、mapper层，通过使用这种方式编写代码可以提高代码的复用性，mvc的全名可以描述为模型-视图-控制器，模型代表的是提供要展示的数据，视图就是负责进行模型的展示，即我们见到的用户界面，控制器是接受用户请求，委托给模型进行处理，处理完毕后把返回的数据模型返回给视图，由视图负责展示
mvc的执行流程可以描述为前端控制器接受用户请求，然后调用处理器映射器，由处理器映射器找到具体的处理器，生成处理器对象和处理器拦截器，再一起返回给前端控制器，然后前段控制器调用具体的处理器，并在方法上添加@ResponseBody注解，通过httpmerssgeconverter来返回结果并转化为json格式

##### spring中事务是如何实现的：

其本质就是通过AOP功能，在方法执行前后进行拦截，在执行方法前开启事务，在执行完目标方法之后根据执行情况进行提交事务或者回滚事务；

##### 在什么情况下spring中事务会失效；

1、异常捕获处理，自己处理了异常，没有抛出，这时事务有可能只进行了前一部分就结束了，导致事务失效，我们可以通过手动抛出异常进行处理；

2、抛出检查异常，因为spring默认只会回滚非检查异常， 我们可以通过配置rollbackFor属性来解决；

3、没有使用public方法导致的事务异常，spring为方法添加代理，添加事务通知等，前提条件都是public方法，我们可以把方法改为public方法来解决；

##### SpringMVC有了解吗，它的执行流程是怎么样的呢

首先用户会发送请求到前端控制器，前端控制器收到请求后调用处理器映射器，处理器映射器会去找到具体的处理器，生成具体的处理器对象和处理器拦截器，再一起返回给前端控制器，然后前端控制器会调用具体的处理器，并在方法上加上@ResponseBody，通过HttpMessageConverter来返回结果并转换为json响应；

##### Springboot自动配置原理你了解吗？

在Spring Boot项目中的引导类上会有一个@SpringBootApplication，这个注解对3个注解进行了封装，他们分别是@SpringbootConfiguration、@EnableautoConfiguration、@ComponentScan

其中@EnableAutoConfiguration是实现自动配置类的核心注解，该注解通过@import注解导入对应的配置选择器，内部就是读取了该项目和该项目引用的jar包的classpath路径下MeTA-INF/spring.factories文件中所配置类的全类名。在这些配置类中所定义的Bean会根据条件注解所指定的条件来决定是否将其导入到Spring容器中；

条件判断会有像@ConditionalOnClass这样的注解，判断是否有对应的class文件，如果有则加载该类，把这个配置类中所有的bean放入Spring容器中使用；